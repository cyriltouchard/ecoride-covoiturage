<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentation Technique EcoRide - Interface Interactive</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 30px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .sidebar {
            background: linear-gradient(180deg, #2c3e50 0%, #34495e 100%);
            padding: 30px 0;
            color: white;
        }

        .nav-item {
            padding: 15px 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .nav-item:hover {
            background: rgba(255,255,255,0.1);
            border-left-color: #3498db;
        }

        .nav-item.active {
            background: rgba(52, 152, 219, 0.2);
            border-left-color: #3498db;
        }

        .nav-item i {
            font-size: 1.2rem;
            width: 20px;
        }

        .content {
            padding: 40px;
            overflow-y: auto;
            max-height: 80vh;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section h2 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 20px;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }

        .architecture-diagram {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            border: 2px solid #e9ecef;
        }

        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .tech-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .tech-card:hover {
            transform: translateY(-5px);
        }

        .tech-card h3 {
            font-size: 1.4rem;
            margin-bottom: 15px;
        }

        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .metric-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            border-color: #3498db;
            box-shadow: 0 5px 20px rgba(52, 152, 219, 0.1);
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #3498db;
            margin-bottom: 10px;
        }

        .metric-label {
            color: #666;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: 'Fira Code', monospace;
            position: relative;
        }

        .code-header {
            background: #34495e;
            margin: -20px -20px 20px -20px;
            padding: 10px 20px;
            font-size: 0.9rem;
            color: #bdc3c7;
        }

        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .feature-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #3498db;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .feature-icon {
            background: #3498db;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .security-section {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .performance-chart {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-ok { background: #27ae60; }
        .status-warning { background: #f39c12; }
        .status-error { background: #e74c3c; }

        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                background: #2c3e50;
                padding: 20px 0;
                order: 2;
            }
            
            .content {
                order: 1;
                max-height: none;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ› ï¸ Documentation Technique EcoRide</h1>
            <p>Interface Interactive - Architecture & Technologies 2025</p>
        </div>

        <div class="dashboard">
            <nav class="sidebar">
                <div class="nav-item active" data-section="overview">
                    <i class="fas fa-home"></i>
                    <span>Vue d'ensemble</span>
                </div>
                <div class="nav-item" data-section="architecture">
                    <i class="fas fa-sitemap"></i>
                    <span>Architecture</span>
                </div>
                <div class="nav-item" data-section="technologies">
                    <i class="fas fa-cogs"></i>
                    <span>Technologies</span>
                </div>
                <div class="nav-item" data-section="security">
                    <i class="fas fa-shield-alt"></i>
                    <span>SÃ©curitÃ©</span>
                </div>
                <div class="nav-item" data-section="performance">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Performance</span>
                </div>
                <div class="nav-item" data-section="api">
                    <i class="fas fa-plug"></i>
                    <span>API REST</span>
                </div>
                <div class="nav-item" data-section="database">
                    <i class="fas fa-database"></i>
                    <span>Base de DonnÃ©es</span>
                </div>
                <div class="nav-item" data-section="deployment">
                    <i class="fas fa-rocket"></i>
                    <span>DÃ©ploiement</span>
                </div>
            </nav>

            <main class="content">
                <!-- Vue d'ensemble -->
                <section class="section active" id="overview">
                    <h2>ğŸ¯ Vue d'Ensemble du SystÃ¨me</h2>
                    
                    <div class="metric-grid">
                        <div class="metric-card">
                            <div class="metric-value">100%</div>
                            <div class="metric-label">Fonctionnel</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">Node.js</div>
                            <div class="metric-label">Backend</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">2 DB</div>
                            <div class="metric-label">MongoDB + MySQL</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">JWT</div>
                            <div class="metric-label">Authentification</div>
                        </div>
                    </div>

                    <div class="feature-list">
                        <div class="feature-item">
                            <div class="feature-icon"><i class="fas fa-users"></i></div>
                            <div>
                                <h4>Gestion Utilisateurs</h4>
                                <p>Inscription, authentification, profils</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon"><i class="fas fa-car"></i></div>
                            <div>
                                <h4>Gestion VÃ©hicules</h4>
                                <p>CRUD vÃ©hicules, validation donnÃ©es</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon"><i class="fas fa-route"></i></div>
                            <div>
                                <h4>SystÃ¨me Trajets</h4>
                                <p>CrÃ©ation, recherche, rÃ©servation</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon"><i class="fas fa-star"></i></div>
                            <div>
                                <h4>SystÃ¨me Avis</h4>
                                <p>Ã‰valuations, modÃ©ration, qualitÃ©</p>
                            </div>
                        </div>
                    </div>

                    <div class="architecture-diagram">
                        <h3>ğŸ—ï¸ Architecture GÃ©nÃ©rale</h3>
                        <pre style="font-family: monospace; color: #2c3e50; font-size: 0.9rem;">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CLIENT TIER   â”‚    â”‚ APPLICATION     â”‚    â”‚   DATA TIER     â”‚
â”‚                 â”‚    â”‚     TIER        â”‚    â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ HTML5/CSS3  â”‚ â”‚â—„â”€â”€â–ºâ”‚ â”‚ Node.js     â”‚ â”‚â—„â”€â”€â–ºâ”‚ â”‚ MongoDB     â”‚ â”‚
â”‚ â”‚ JavaScript  â”‚ â”‚    â”‚ â”‚ Express.js  â”‚ â”‚    â”‚ â”‚ NoSQL       â”‚ â”‚
â”‚ â”‚ Responsive  â”‚ â”‚    â”‚ â”‚ JWT Auth    â”‚ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â”‚ Rate Limit  â”‚ â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                 â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â”‚ MySQL       â”‚ â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚ â”‚ Relationnel â”‚ â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        </pre>
                    </div>
                </section>

                <!-- Architecture -->
                <section class="section" id="architecture">
                    <h2>ğŸ—ï¸ Architecture du SystÃ¨me</h2>
                    
                    <div class="architecture-diagram">
                        <h3>Pipeline de Traitement des RequÃªtes</h3>
                        <div class="code-block">
                            <div class="code-header">Middleware Stack - Express.js</div>
                            <pre>
app.use(requestLogger);           // 1. Logging des requÃªtes
app.use(helmet());               // 2. SÃ©curitÃ© headers HTTP
app.use(generalLimiter);         // 3. Rate limiting global
app.use(cors(corsOptions));      // 4. Configuration CORS
app.use(express.json());         // 5. Parsing JSON
app.use(authenticateToken);      // 6. Authentification JWT
app.use(validateInput);          // 7. Validation donnÃ©es
app.use(errorLogger);            // 8. Gestion erreurs
                            </pre>
                        </div>
                    </div>

                    <div class="tech-grid">
                        <div class="tech-card">
                            <h3>ğŸ¯ Couche PrÃ©sentation</h3>
                            <ul>
                                <li><strong>HTML5 SÃ©mantique</strong> - Structure accessible</li>
                                <li><strong>CSS3 Modern</strong> - Grid, Flexbox, Variables</li>
                                <li><strong>JavaScript ES6+</strong> - Fetch API, Async/Await</li>
                                <li><strong>Design Responsive</strong> - Mobile-first</li>
                            </ul>
                        </div>
                        <div class="tech-card">
                            <h3>âš™ï¸ Couche Application</h3>
                            <ul>
                                <li><strong>Node.js 18+</strong> - Runtime JavaScript</li>
                                <li><strong>Express.js 4.18+</strong> - Framework web</li>
                                <li><strong>Middleware Stack</strong> - SÃ©curitÃ© et validation</li>
                                <li><strong>Architecture MVC</strong> - SÃ©paration responsabilitÃ©s</li>
                            </ul>
                        </div>
                        <div class="tech-card">
                            <h3>ğŸ—„ï¸ Couche DonnÃ©es</h3>
                            <ul>
                                <li><strong>MongoDB 7.0+</strong> - DonnÃ©es flexibles</li>
                                <li><strong>MySQL 8.0+</strong> - DonnÃ©es transactionnelles</li>
                                <li><strong>Mongoose ODM</strong> - SchÃ©mas et validation</li>
                                <li><strong>Connection Pooling</strong> - Performance optimisÃ©e</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Technologies -->
                <section class="section" id="technologies">
                    <h2>ğŸ’» Stack Technologique</h2>
                    
                    <div class="tech-grid">
                        <div class="tech-card">
                            <h3>ğŸš€ Backend Core</h3>
                            <div class="code-block">
                                <div class="code-header">package.json - Dependencies</div>
                                <pre>
{
  "express": "^4.18.2",
  "mongoose": "^8.0.3",
  "mysql2": "^3.15.0",
  "bcryptjs": "^2.4.3",
  "jsonwebtoken": "^9.0.2",
  "helmet": "^7.2.0",
  "cors": "^2.8.5",
  "express-rate-limit": "^8.1.0",
  "winston": "^3.11.0"
}
                                </pre>
                            </div>
                        </div>
                        <div class="tech-card">
                            <h3>ğŸ”’ SÃ©curitÃ©</h3>
                            <ul style="list-style: none; padding: 0;">
                                <li>ğŸ›¡ï¸ <strong>JWT</strong> - Authentification stateless</li>
                                <li>ğŸ” <strong>bcrypt</strong> - Hachage sÃ©curisÃ© (salt 12)</li>
                                <li>âš¡ <strong>Rate Limiting</strong> - Protection DDoS</li>
                                <li>ğŸ› ï¸ <strong>Helmet</strong> - Headers sÃ©curisÃ©s</li>
                                <li>ğŸŒ <strong>CORS</strong> - Cross-origin contrÃ´lÃ©</li>
                                <li>âœ… <strong>Validation</strong> - Express-validator</li>
                            </ul>
                        </div>
                    </div>

                    <div class="performance-chart">
                        <h3>ğŸ“Š Performances Middleware</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;">
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; color: #27ae60;">~1ms</div>
                                <div style="color: #666;">JWT Verification</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; color: #27ae60;">~2ms</div>
                                <div style="color: #666;">Rate Limiting</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; color: #27ae60;">~0.5ms</div>
                                <div style="color: #666;">Validation</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; color: #27ae60;">~0.1ms</div>
                                <div style="color: #666;">Logging</div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- SÃ©curitÃ© -->
                <section class="section" id="security">
                    <h2>ğŸ”’ Architecture SÃ©curisÃ©e</h2>
                    
                    <div class="security-section">
                        <h3>ğŸ›¡ï¸ Couches de SÃ©curitÃ©</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                            <div>
                                <h4>Authentification</h4>
                                <ul>
                                    <li>JWT avec expiration 24h</li>
                                    <li>Refresh tokens sÃ©curisÃ©s</li>
                                    <li>Bearer token validation</li>
                                    <li>RÃ´les utilisateur (RBAC)</li>
                                </ul>
                            </div>
                            <div>
                                <h4>Protection DonnÃ©es</h4>
                                <ul>
                                    <li>bcrypt salt rounds: 12</li>
                                    <li>Validation stricte entrÃ©es</li>
                                    <li>Sanitisation SQL/NoSQL</li>
                                    <li>Chiffrement secrets (.env)</li>
                                </ul>
                            </div>
                            <div>
                                <h4>Protection RÃ©seau</h4>
                                <ul>
                                    <li>Rate limiting adaptatif</li>
                                    <li>CORS configurÃ© finement</li>
                                    <li>Headers sÃ©curisÃ©s (Helmet)</li>
                                    <li>CSP (Content Security Policy)</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">Rate Limiting Configuration</div>
                        <pre>
// Configuration des limites par endpoints
const loginLimiter = rateLimit({
  windowMs: 15 * 60 * 1000,     // 15 minutes
  max: 5,                       // 5 tentatives max
  skipSuccessfulRequests: true,
  message: 'Trop de tentatives de connexion'
});

const registerLimiter = rateLimit({
  windowMs: 60 * 60 * 1000,     // 1 heure
  max: 3,                       // 3 inscriptions max
  message: 'Trop d\'inscriptions depuis cette IP'
});

const generalLimiter = rateLimit({
  windowMs: 15 * 60 * 1000,     // 15 minutes
  max: 100,                     // 100 requÃªtes gÃ©nÃ©rales max
  standardHeaders: true,
  legacyHeaders: false
});
                        </pre>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0;">
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem; color: #e74c3c;">5</div>
                            <div style="color: #666;">Tentatives login max</div>
                            <div style="font-size: 0.8rem; color: #999;">par 15 minutes</div>
                        </div>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem; color: #e74c3c;">3</div>
                            <div style="color: #666;">Inscriptions max</div>
                            <div style="font-size: 0.8rem; color: #999;">par heure</div>
                        </div>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem; color: #f39c12;">100</div>
                            <div style="color: #666;">RequÃªtes gÃ©nÃ©rales</div>
                            <div style="font-size: 0.8rem; color: #999;">par 15 minutes</div>
                        </div>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem; color: #27ae60;">12</div>
                            <div style="color: #666;">Salt rounds bcrypt</div>
                            <div style="font-size: 0.8rem; color: #999;">sÃ©curitÃ© maximum</div>
                        </div>
                    </div>
                </section>

                <!-- Performance -->
                <section class="section" id="performance">
                    <h2>âš¡ Optimisations Performance</h2>
                    
                    <div class="metric-grid">
                        <div class="metric-card">
                            <div class="metric-value">&lt; 200ms</div>
                            <div class="metric-label">Temps rÃ©ponse API</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">10</div>
                            <div class="metric-label">Connexions pool DB</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">Gzip</div>
                            <div class="metric-label">Compression</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">Winston</div>
                            <div class="metric-label">Logging system</div>
                        </div>
                    </div>

                    <div class="performance-chart">
                        <h3>ğŸ“ˆ MÃ©triques de Performance</h3>
                        <div class="code-block">
                            <div class="code-header">Performance Monitor - Frontend</div>
                            <pre>
class PerformanceMonitor {
  measurePageLoad() {
    const navigation = performance.getEntriesByType('navigation')[0];
    return {
      domContentLoaded: navigation.domContentLoadedEventEnd,
      loadComplete: navigation.loadEventEnd,
      totalTime: navigation.loadEventEnd - navigation.fetchStart
    };
  }

  trackAPICall(url, startTime) {
    const duration = Date.now() - startTime;
    if (duration > 2000) {
      console.warn(`API lente: ${url} (${duration}ms)`);
    }
    return duration;
  }
}
                            </pre>
                        </div>
                    </div>

                    <div class="tech-grid">
                        <div class="tech-card">
                            <h3>ğŸš€ Optimisations Backend</h3>
                            <ul>
                                <li><strong>Connection Pooling</strong> - MySQL & MongoDB</li>
                                <li><strong>Lean Queries</strong> - MongoDB performance</li>
                                <li><strong>Pagination</strong> - RequÃªtes limitÃ©es</li>
                                <li><strong>Compression Gzip</strong> - RÃ©duction bande passante</li>
                                <li><strong>Health Checks</strong> - Monitoring proactif</li>
                            </ul>
                        </div>
                        <div class="tech-card">
                            <h3>ğŸ¨ Optimisations Frontend</h3>
                            <ul>
                                <li><strong>Lazy Loading</strong> - Images diffÃ©rÃ©es</li>
                                <li><strong>CSS Variables</strong> - Performance styles</li>
                                <li><strong>Fetch API</strong> - RequÃªtes optimisÃ©es</li>
                                <li><strong>Cache Headers</strong> - Ressources statiques</li>
                                <li><strong>Minification</strong> - Taille rÃ©duite</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- API REST -->
                <section class="section" id="api">
                    <h2>ğŸ”Œ API REST Structure</h2>
                    
                    <div class="architecture-diagram">
                        <h3>ğŸ›£ï¸ Routes API</h3>
                        <pre style="font-family: monospace; color: #2c3e50;">
/api/
â”œâ”€â”€ /auth
â”‚   â”œâ”€â”€ POST /register       # Inscription
â”‚   â””â”€â”€ POST /login          # Connexion
â”œâ”€â”€ /users
â”‚   â”œâ”€â”€ GET /profile         # Profil utilisateur
â”‚   â”œâ”€â”€ PUT /profile         # Mise Ã  jour profil
â”‚   â””â”€â”€ GET /history         # Historique trajets
â”œâ”€â”€ /vehicles
â”‚   â”œâ”€â”€ GET /                # Liste vÃ©hicules
â”‚   â”œâ”€â”€ POST /               # Ajouter vÃ©hicule
â”‚   â”œâ”€â”€ PUT /:id             # Modifier vÃ©hicule
â”‚   â””â”€â”€ DELETE /:id          # Supprimer vÃ©hicule
â”œâ”€â”€ /rides
â”‚   â”œâ”€â”€ GET /                # Rechercher trajets
â”‚   â”œâ”€â”€ POST /               # Proposer trajet
â”‚   â”œâ”€â”€ GET /:id             # DÃ©tails trajet
â”‚   â”œâ”€â”€ POST /:id/join       # Rejoindre trajet
â”‚   â””â”€â”€ DELETE /:id/leave    # Quitter trajet
â”œâ”€â”€ /reviews
â”‚   â”œâ”€â”€ POST /               # CrÃ©er avis
â”‚   â”œâ”€â”€ GET /driver/:id      # Avis chauffeur
â”‚   â””â”€â”€ PUT /:id/moderate    # ModÃ©rer avis
â””â”€â”€ /health
    â”œâ”€â”€ GET /health          # Ã‰tat systÃ¨me
    â”œâ”€â”€ GET /metrics         # MÃ©triques
    â””â”€â”€ GET /ping            # Test connectivitÃ©
                        </pre>
                    </div>

                    <div class="code-block">
                        <div class="code-header">Format RÃ©ponse Standard</div>
                        <pre>
// SuccÃ¨s
{
  "success": true,
  "message": "OpÃ©ration rÃ©ussie",
  "data": { ... },
  "timestamp": "2025-10-03T10:30:00Z"
}

// Erreur
{
  "success": false,
  "message": "Description de l'erreur",
  "errors": [...],
  "timestamp": "2025-10-03T10:30:00Z"
}
                        </pre>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin: 20px 0;">
                        <div style="background: #27ae60; color: white; padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold;">200</div>
                            <div style="font-size: 0.9rem;">Success</div>
                        </div>
                        <div style="background: #2980b9; color: white; padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold;">201</div>
                            <div style="font-size: 0.9rem;">Created</div>
                        </div>
                        <div style="background: #e67e22; color: white; padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold;">400</div>
                            <div style="font-size: 0.9rem;">Bad Request</div>
                        </div>
                        <div style="background: #e74c3c; color: white; padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold;">401</div>
                            <div style="font-size: 0.9rem;">Unauthorized</div>
                        </div>
                        <div style="background: #8e44ad; color: white; padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold;">403</div>
                            <div style="font-size: 0.9rem;">Forbidden</div>
                        </div>
                        <div style="background: #95a5a6; color: white; padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold;">429</div>
                            <div style="font-size: 0.9rem;">Rate Limited</div>
                        </div>
                    </div>
                </section>

                <!-- Base de DonnÃ©es -->
                <section class="section" id="database">
                    <h2>ğŸ—„ï¸ Architecture Base de DonnÃ©es Hybride</h2>
                    
                    <div class="tech-grid">
                        <div class="tech-card">
                            <h3>ğŸƒ MongoDB (NoSQL)</h3>
                            <ul>
                                <li><strong>Profils utilisateurs</strong> - FlexibilitÃ© schÃ©ma</li>
                                <li><strong>VÃ©hicules</strong> - DonnÃ©es semi-structurÃ©es</li>
                                <li><strong>Trajets</strong> - RequÃªtes complexes</li>
                                <li><strong>Avis</strong> - Contenu variable</li>
                                <li><strong>Logs</strong> - Volume Ã©levÃ©</li>
                            </ul>
                        </div>
                        <div class="tech-card">
                            <h3>ğŸ¬ MySQL (SQL)</h3>
                            <ul>
                                <li><strong>Transactions</strong> - IntÃ©gritÃ© ACID</li>
                                <li><strong>CrÃ©dits</strong> - DonnÃ©es financiÃ¨res</li>
                                <li><strong>Audit</strong> - TraÃ§abilitÃ©</li>
                                <li><strong>Rapports</strong> - Analytics</li>
                                <li><strong>Relations</strong> - RÃ©fÃ©rentiel</li>
                            </ul>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">ModÃ¨le Utilisateur - MongoDB Mongoose</div>
                        <pre>
const userSchema = new Schema({
  pseudo: { 
    type: String, 
    required: true, 
    unique: true,
    minlength: 3,
    maxlength: 30 
  },
  email: { 
    type: String, 
    required: true, 
    unique: true,
    lowercase: true 
  },
  password: { 
    type: String, 
    required: true,
    minlength: 8 
  },
  credits: { 
    type: Number, 
    default: 20,
    min: 0 
  },
  role: { 
    type: String, 
    enum: ['passager', 'chauffeur', 'employe', 'admin'],
    default: 'passager' 
  },
  vehicles: [{ 
    type: Schema.Types.ObjectId, 
    ref: 'Vehicle' 
  }]
}, { 
  timestamps: true,
  collection: 'users'
});

// Indexation pour performance
userSchema.index({ email: 1 });
userSchema.index({ pseudo: 1 });
                        </pre>
                    </div>

                    <div class="performance-chart">
                        <h3>ğŸ“Š StratÃ©gie de RÃ©partition des DonnÃ©es</h3>
                        <div style="overflow-x: auto;">
                            <table style="width: 100%; border-collapse: collapse; margin-top: 15px;">
                                <thead>
                                    <tr style="background: #f8f9fa;">
                                        <th style="padding: 12px; border: 1px solid #dee2e6;">Type de DonnÃ©es</th>
                                        <th style="padding: 12px; border: 1px solid #dee2e6;">Base</th>
                                        <th style="padding: 12px; border: 1px solid #dee2e6;">Justification</th>
                                        <th style="padding: 12px; border: 1px solid #dee2e6;">Performance</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td style="padding: 12px; border: 1px solid #dee2e6;">Profils utilisateurs</td>
                                        <td style="padding: 12px; border: 1px solid #dee2e6;"><span class="status-indicator status-ok"></span>MongoDB</td>
                                        <td style="padding: 12px; border: 1px solid #dee2e6;">FlexibilitÃ© schÃ©ma, Ã©volution</td>
                                        <td style="padding: 12px; border: 1px solid #dee2e6;">Excellent</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 12px; border: 1px solid #dee2e6;">CrÃ©dits/Transactions</td>
                                        <td style="padding: 12px; border: 1px solid #dee2e6;"><span class="status-indicator status-warning"></span>MySQL</td>
                                        <td style="padding: 12px; border: 1px solid #dee2e6;">ACID, intÃ©gritÃ© financiÃ¨re</td>
                                        <td style="padding: 12px; border: 1px solid #dee2e6;">Critique</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 12px; border: 1px solid #dee2e6;">VÃ©hicules</td>
                                        <td style="padding: 12px; border: 1px solid #dee2e6;"><span class="status-indicator status-ok"></span>MongoDB</td>
                                        <td style="padding: 12px; border: 1px solid #dee2e6;">DonnÃ©es semi-structurÃ©es</td>
                                        <td style="padding: 12px; border: 1px solid #dee2e6;">Bon</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 12px; border: 1px solid #dee2e6;">Logs/Audit</td>
                                        <td style="padding: 12px; border: 1px solid #dee2e6;"><span class="status-indicator status-ok"></span>MongoDB</td>
                                        <td style="padding: 12px; border: 1px solid #dee2e6;">Volume Ã©levÃ©, structure variable</td>
                                        <td style="padding: 12px; border: 1px solid #dee2e6;">Optimal</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- DÃ©ploiement -->
                <section class="section" id="deployment">
                    <h2>ğŸš€ StratÃ©gie de DÃ©ploiement</h2>
                    
                    <div class="architecture-diagram">
                        <h3>ğŸ”„ Pipeline CI/CD</h3>
                        <pre style="font-family: monospace; color: #2c3e50;">
Development  â†’  Testing  â†’  Staging  â†’  Production
     â†“             â†“          â†“           â†“
   Local       Unit Tests   E2E Tests   Live
   nodemon     Jest         Cypress     PM2
                            
   Git Push â†’ GitHub Actions â†’ Docker Build â†’ Deploy
                        </pre>
                    </div>

                    <div class="code-block">
                        <div class="code-header">Scripts Package.json</div>
                        <pre>
{
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js",
    "test": "jest --coverage",
    "build": "npm run test && npm run security-check",
    "health": "curl -f http://localhost:3002/api/health",
    "audit": "npm audit --audit-level moderate",
    "security-check": "npm audit && echo 'SÃ©curitÃ© OK'",
    "logs": "tail -f logs/combined.log",
    "deploy": "git pull && npm install && pm2 restart all"
  }
}
                        </pre>
                    </div>

                    <div class="tech-grid">
                        <div class="tech-card">
                            <h3>ğŸ³ Docker Configuration</h3>
                            <ul>
                                <li><strong>Multi-stage build</strong> - Optimisation image</li>
                                <li><strong>Node Alpine</strong> - Image lÃ©gÃ¨re (18-alpine)</li>
                                <li><strong>Utilisateur non-root</strong> - SÃ©curitÃ©</li>
                                <li><strong>Health checks</strong> - Monitoring intÃ©grÃ©</li>
                                <li><strong>Docker Compose</strong> - Orchestration locale</li>
                            </ul>
                        </div>
                        <div class="tech-card">
                            <h3>ğŸ”§ Configuration Environnements</h3>
                            <ul>
                                <li><strong>Development</strong> - nodemon, debug logs</li>
                                <li><strong>Staging</strong> - Tests E2E, validation</li>
                                <li><strong>Production</strong> - PM2, monitoring</li>
                                <li><strong>Variables ENV</strong> - Configuration sÃ©curisÃ©e</li>
                                <li><strong>Secrets Management</strong> - Azure Key Vault</li>
                            </ul>
                        </div>
                    </div>

                    <div class="metric-grid">
                        <div class="metric-card">
                            <div class="metric-value">99.9%</div>
                            <div class="metric-label">Uptime Target</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">&lt; 30s</div>
                            <div class="metric-label">Temps DÃ©ploiement</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">0</div>
                            <div class="metric-label">Downtime</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">Auto</div>
                            <div class="metric-label">Rollback</div>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <script>
        // Navigation interactive
        document.addEventListener('DOMContentLoaded', function() {
            const navItems = document.querySelectorAll('.nav-item');
            const sections = document.querySelectorAll('.section');

            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const targetSection = this.dataset.section;
                    
                    // Mise Ã  jour navigation
                    navItems.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Mise Ã  jour contenu
                    sections.forEach(section => section.classList.remove('active'));
                    document.getElementById(targetSection).classList.add('active');
                });
            });

            // Animation des mÃ©triques
            function animateNumbers() {
                const metrics = document.querySelectorAll('.metric-value');
                metrics.forEach(metric => {
                    const text = metric.textContent;
                    if (text.includes('%') || text.includes('ms') || text.includes('s')) {
                        metric.style.transition = 'all 0.5s ease';
                        metric.style.transform = 'scale(1.1)';
                        setTimeout(() => {
                            metric.style.transform = 'scale(1)';
                        }, 500);
                    }
                });
            }

            // DÃ©clencher l'animation au changement de section
            navItems.forEach(item => {
                item.addEventListener('click', () => {
                    setTimeout(animateNumbers, 300);
                });
            });

            // Animation initiale
            animateNumbers();
        });

        // Fonction utilitaire pour les indicateurs de statut
        function updateStatusIndicators() {
            const indicators = document.querySelectorAll('.status-indicator');
            indicators.forEach(indicator => {
                if (indicator.classList.contains('status-ok')) {
                    indicator.title = 'Service fonctionnel';
                } else if (indicator.classList.contains('status-warning')) {
                    indicator.title = 'Attention requise';
                } else if (indicator.classList.contains('status-error')) {
                    indicator.title = 'Service indisponible';
                }
            });
        }

        updateStatusIndicators();
    </script>
</body>
</html>